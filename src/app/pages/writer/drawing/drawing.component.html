<div class="bg-white min-h-screen flex flex-col items-center justify-center px-4 pb-4">
    <!-- Error and Success Messages -->
    @if (error) {
        <div class="bg-red-100 border border-red-400 text-red-700 px-12 py-3 rounded relative mb-4" role="alert">
            <strong class="font-bold">Error! </strong>
            <span class="block sm:inline">Make sure all fields are filled in.</span>
            <span (click)="toggleError()" class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer">
                <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <title>Close</title>
                    <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                </svg>
            </span>
        </div>
    }
    @if (success) {
        <div class="bg-green-100 border border-green-400 text-green-700 px-12 py-3 rounded relative mb-4" role="alert">
            <strong class="font-bold">Success! </strong>
            <span class="block sm:inline">Your drawing has been saved.</span>
            <span (click)="toggleSuccess()" class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer">
                <svg class="fill-current h-6 w-6 text-green-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <title>Close</title>
                    <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                </svg>
            </span>
        </div>
    }

    <!-- Centered title above both columns -->
    <div class="w-full text-center mb-8">
        <h2 class="text-2xl font-bold text-black">New drawing for {{ topic.name }}</h2>
    </div>

    <!-- Flex container for the two columns -->
    <div class="w-full md:w-3/5 lg:w-2/3 bg-gray-100 rounded-lg p-8 flex flex-col md:flex-row gap-8">
        <!-- Left side: Input fields -->
        <div class="flex-1">
            <div class="flex flex-col mb-4">
                <label for="dropdown" class="text-sm font-medium text-gray-700 mb-1">Select an option</label>
                <select id="dropdown" class="h-10 rounded-md border border-black bg-white text-black px-2" [(ngModel)]="selectedOption">
                    <option *ngFor="let option of dropdownOptions" [value]="option">
                        {{ option }}
                    </option>
                </select>
            </div>
            <div class="mb-4">
                <label for="description" class="text-sm font-medium text-gray-700 mb-1">Description</label>
                <textarea id="description" class="w-full border border-black rounded-md p-2 h-36 bg-white text-black" [(ngModel)]="description"></textarea>
            </div>
        </div>

        <!-- Right side: Drawing panel -->
        <div class="flex-1">
            <p class="text-sm font-medium text-gray-700 mb-2">Drawing area (400x400)</p>
            <div class="hidden sm:hidden md:hidden lg:block"> <!-- Hide on small screens -->
                <canvas #drawingCanvas
                    (mousedown)="startDrawing($event)"
                    (mousemove)="draw($event)"
                    (mouseup)="stopDrawing()"
                    (mouseleave)="stopDrawing()"
                    class="rounded-md border border-black bg-white m-auto"
                    width="400" height="400">
                </canvas>
            </div>
            <p class="text-red-500 text-sm text-center lg:hidden">Screen too small to display drawing area.</p>
        </div>        
    </div>

    <!-- Center the buttons below the modal -->
    <div class="w-full flex justify-center mt-8">
        <app-button (click)="clearCanvas()" buttonText="Clear" class="rounded"></app-button>
        @if (updateDrawing) {
            <app-button buttonText="Update" (click)="submitDrawing()" class="rounded"></app-button>
        } @else {
            <app-button buttonText="Submit" (click)="submitDrawing()" class="rounded"></app-button>
        }
    </div>
</div>